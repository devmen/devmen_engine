$('#content-container').html('<%=  
  @template ||= request[:action]
  j render(:template => "admin/pages/#{@template}", :format => :html)
-%>');
$('#page_links').html('<%= j render "admin/pages" %>');
<%-  
# Change the browser address accordingly to the page url
  page_title = @page.name || 'New page'
  page_url = '/admin/pages/' + ( @page.url || 'new-page' );
-%>
window.history.replaceState(null, '<%= j page_title %>', '<%= j page_url %>');
<%
# Use this code to aviod the exception raises after remote form submitting
# uncaught exception: TypeError: window.document.selection is undefined
if ['new', 'edit'].include? @template
-%>  
  $.markitup_init(true);
<% end %>